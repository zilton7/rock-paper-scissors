<script>
  function computerPlay() {
    const array = ["rock", "paper", "scissors"];
    return array[Math.floor(Math.random() * array.length)];
  }

  function playRound(playerSelection, computerSelection) {
    let player = playerSelection.toLowerCase();
    let computer = computerSelection.toLowerCase();
    console.log(`Your selection: ${player}`);
    console.log(`Your selection: ${computer}`);
    if (player === "rock" && computer === "scissors") {
      console.log(`You win ${player} beats ${computer}`);
      return "win";
    }
    if (player === "paper" && computer === "rock") {
      console.log(`You win ${player} beats ${computer}`);
      return "win";
    }
    if (player === "scissors" && computer === "paper") {
      console.log(`You win ${player} beats ${computer}`);
      return "win";
    }
    if (player === "scissors" && computer === "rock") {
      console.log(`You loose ${player} beats ${computer}`);
      return "lose";
    }
    if (player === "rock" && computer === "paper") {
      console.log(`You lose ${player} beats ${computer}`);
      return "lose";
    }
    if (player === "rock" && computer === "scissors") {
      console.log(`You lose ${player} beats ${computer}`);
      return "lose";
    } else {
      console.log("Draw");
      return "draw";
    }
  }

  function declareWinner(playerVictories, computerVictories) {
    if (playerVictories > computerVictories) {
      return `Player WON the game by ${playerVictories} to ${computerVictories}`;
    } else if (computerVictories > playerVictories) {
      return `Player LOST the game by ${playerVictories} to ${computerVictories}`;
    }
  }

  function game() {
    let playerVictories = 0;
    let computerVictories = 0;
    for (let i = 0; i < 20; i++) {
      let result = playRound(prompt(), computerPlay());
      if (result === "win") {
        playerVictories++;
      } else if (result === "lose") {
        computerVictories++;
      }
      if (playerVictories === 5 || computerVictories === 5) {
        return declareWinner(playerVictories, computerVictories);
      }
    }
  }

  console.log(game());
</script>
